import router from '@ohos.router';
import prompt from '@ohos.promptAction';

interface CollectionItem {
  id: string;
  title: string;
  author: string;
  summary: string;
  image: ResourceStr;
  collectTime: string;
  topic: string;
}

@Entry
@Component
struct CollectionPage {
  @State collections: CollectionItem[] = [
    {
      id: '1',
      title: 'å¤§æ¨¡åž‹ä¼šè®©å“ªäº›è¡Œä¸šçŽ‡å…ˆå—ç›Šï¼Ÿ',
      author: 'ç­”ä¸» Â· æŽç„¶',
      summary: 'æ•ˆçŽ‡ã€åˆ›é€ åŠ›ã€å·¥å…·é“¾æ”¹é€ ä¸‰ä¸ªè§’åº¦çš„è¡Œä¸šè§‚å¯Ÿ',
      image: $r('app.media.thumb_701'),
      collectTime: '2024-12-18',
      topic: 'ç§‘æŠ€'
    },
    {
      id: '2',
      title: 'å¦‚ä½•å¿«é€ŸæŽŒæ¡ä¸€é—¨æ–°çš„ç¼–ç¨‹è¯­è¨€ï¼Ÿ',
      author: 'ç­”ä¸» Â· å¼ ä¼Ÿ',
      summary: 'ä»Žè¯­æ³•åŸºç¡€åˆ°é¡¹ç›®å®žæˆ˜ï¼Œåˆ†äº«é«˜æ•ˆå­¦ä¹ è·¯å¾„å’Œå®žè·µç»éªŒ',
      image: $r('app.media.thumb_702'),
      collectTime: '2024-12-17',
      topic: 'ç¼–ç¨‹'
    },
    {
      id: '3',
      title: 'æ·±åº¦å­¦ä¹ åœ¨åŒ»ç–—è¯Šæ–­ä¸­çš„åº”ç”¨å‰æ™¯å¦‚ä½•ï¼Ÿ',
      author: 'ç­”ä¸» Â· åˆ˜æ•',
      summary: 'AIè¾…åŠ©è¯Šæ–­ã€å½±åƒè¯†åˆ«ã€è¯ç‰©ç ”å‘ç­‰é¢†åŸŸçš„çªç ´ä¸ŽæŒ‘æˆ˜',
      image: $r('app.media.thumb_703'),
      collectTime: '2024-12-15',
      topic: 'åŒ»ç–—'
    },
    {
      id: '4',
      title: 'ä¸ªäººå¦‚ä½•åšå¥½æ•°å­—å®‰å…¨é˜²æŠ¤ï¼Ÿ',
      author: 'ç­”ä¸» Â· çŽ‹ç’',
      summary: 'å£ä»¤ç®¡ç†ã€åŒå› å­ã€è®¾å¤‡åŠ å¯†ä¸Žç¤¾å·¥é˜²å¾¡æ¸…å•',
      image: $r('app.media.thumb_704'),
      collectTime: '2024-12-10',
      topic: 'å®‰å…¨'
    }
  ];

  private removeCollection(id: string) {
    this.collections = this.collections.filter((item: CollectionItem) => item.id !== id);
    prompt.showToast({ message: 'å·²å–æ¶ˆæ”¶è—' });
  }

  build() {
    Column() {
      // é¡¶éƒ¨å¯¼èˆªæ 
      Row() {
        Text('â†')
          .fontSize(24)
          .fontColor('#333333')
          .padding({ left: 16, right: 16 })
          .onClick(() => router.back());

        Text('æˆ‘çš„æ”¶è—')
          .fontSize(18)
          .fontWeight(FontWeight.Medium)
          .fontColor('#333333')
          .layoutWeight(1);

        Text('ç¼–è¾‘')
          .fontSize(14)
          .fontColor('#0f88eb')
          .padding({ right: 16 })
          .onClick(() => prompt.showToast({ message: 'ç¼–è¾‘æ¨¡å¼' }));
      }
      .width('100%')
      .height(56)
      .backgroundColor('#ffffff')
      .alignItems(VerticalAlign.Center);

      // æ”¶è—ç»Ÿè®¡
      Row({ space: 8 }) {
        Text(`å…± ${this.collections.length} ä¸ªæ”¶è—`)
          .fontSize(14)
          .fontColor('#666666');
        Blank();
        Text('æŒ‰æ—¶é—´æŽ’åº')
          .fontSize(13)
          .fontColor('#0f88eb')
          .onClick(() => prompt.showToast({ message: 'æŽ’åºæ–¹å¼åˆ‡æ¢' }));
      }
      .width('100%')
      .padding({ left: 16, right: 16, top: 12, bottom: 12 })
      .backgroundColor('#f9f9f9');

      // æ”¶è—åˆ—è¡¨
      if (this.collections.length === 0) {
        Column({ space: 16 }) {
          Text('ðŸ“š')
            .fontSize(60);
          Text('æš‚æ— æ”¶è—')
            .fontSize(16)
            .fontColor('#999999');
          Text('æµè§ˆå†…å®¹æ—¶ç‚¹å‡»æ”¶è—ï¼Œè¿™é‡Œä¼šæ˜¾ç¤ºä½ çš„æ”¶è—')
            .fontSize(13)
            .fontColor('#bbbbbb');
        }
        .width('100%')
        .layoutWeight(1)
        .justifyContent(FlexAlign.Center)
        .alignItems(HorizontalAlign.Center);
      } else {
        List({ space: 12 }) {
          ForEach(this.collections, (item: CollectionItem) => {
            ListItem() {
              Row({ space: 12 }) {
                Image(item.image)
                  .width(100)
                  .height(70)
                  .borderRadius(8)
                  .objectFit(ImageFit.Cover);

                Column({ space: 6 }) {
                  Text(item.title)
                    .fontSize(15)
                    .fontWeight(FontWeight.Medium)
                    .fontColor('#333333')
                    .maxLines(2)
                    .textOverflow({ overflow: TextOverflow.Ellipsis });

                  Text(item.author)
                    .fontSize(12)
                    .fontColor('#666666');

                  Row({ space: 8 }) {
                    Text(item.topic)
                      .fontSize(11)
                      .fontColor('#0f88eb')
                      .padding({ left: 6, right: 6, top: 2, bottom: 2 })
                      .backgroundColor('#eef5ff')
                      .borderRadius(4);
                    Text(item.collectTime)
                      .fontSize(11)
                      .fontColor('#999999');
                  }
                }
                .layoutWeight(1)
                .alignItems(HorizontalAlign.Start);

                Text('Ã—')
                  .fontSize(20)
                  .fontColor('#cccccc')
                  .onClick(() => this.removeCollection(item.id));
              }
              .width('100%')
              .padding(12)
              .backgroundColor('#ffffff')
              .borderRadius(12)
              .onClick(() => {
                router.pushUrl({
                  url: 'pages/MainPages/DetailPage',
                  params: {
                    title: item.title,
                    author: item.author,
                    topic: item.topic,
                    summary: item.summary
                  }
                });
              });
            };
          });
        }
        .padding({ left: 16, right: 16, top: 12 })
        .layoutWeight(1);
      }
    }
    .width('100%')
    .height('100%')
    .backgroundColor('#f5f5f5');
  }
}

